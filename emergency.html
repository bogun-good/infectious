<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í­ìˆ˜ì˜ ì‘ê¸‰ì²˜ì¹˜ í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Inter í°íŠ¸ë¥¼ Google Fontsì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤. */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Inter', 'Malgun Gothic', sans-serif;
            line-height: 1.6;
        }
        /* í­ìˆ˜ì™€ ê³„ë‹¨ì˜ ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„ì„ ìœ„í•œ transition */
        #pengsoo {
            transition: all 0.7s ease-in-out;
            z-index: 20; /* í­ìˆ˜ê°€ ê³„ë‹¨ ìœ„ë¡œ ë³´ì´ë„ë¡ ì„¤ì • */
            transform: translateX(-50%); /* í­ìˆ˜ì˜ ì™¼ìª½ ì •ë ¬ì„ ìœ„í•´ ìì‹ ì˜ ë„ˆë¹„ ì ˆë°˜ë§Œí¼ ì™¼ìª½ìœ¼ë¡œ ì´ë™ */
        }
        /* ê³„ë‹¨ ìŠ¤íƒ€ì¼ */
        .step {
            background-color: #6b7280; /* íšŒìƒ‰ ê³„ë‹¨ */
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #ffffff; /* ê³„ë‹¨ ìˆ«ì ìƒ‰ìƒ */
            font-weight: bold;
            font-size: 0.8rem; /* ê³„ë‹¨ ìˆ«ì í¬ê¸° */
        }

        /* í€´ì¦ˆ í”¼ë“œë°± ìŠ¤íƒ€ì¼ */
        .feedback-message {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-weight: bold;
            text-align: center;
        }
        .correct {
            background-color: #d4edda; /* ì •ë‹µ - ì—°ë‘ìƒ‰ */
            color: #155724; /* ì •ë‹µ - ì§„í•œ ë…¹ìƒ‰ ê¸€ì”¨ */
        }
        .incorrect {
            background-color: #f8d7da; /* ì˜¤ë‹µ - ì—°í•œ ë¹¨ê°•ìƒ‰ */
            color: #721c24; /* ì˜¤ë‹µ - ì§„í•œ ë¹¨ê°• ê¸€ì”¨ */
        }
        /* ì˜µì…˜ ë¼ë””ì˜¤ ë²„íŠ¼ ìˆ¨ê¸°ê³  spanìœ¼ë¡œ ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ ì ìš© */
        .options label {
            transition: background-color 0.2s;
            margin-bottom: 0.5rem; /* ì˜µì…˜ ê°„ê²© ì¤„ì´ê¸° */
        }
        .options input[type="radio"] {
            display: none; /* ì‘ì€ ì›(ë¼ë””ì˜¤ ë²„íŠ¼) ìˆ¨ê¸°ê¸° */
        }
        .options label span {
            display: block;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #d1d5db; /* ì˜µì…˜ í…Œë‘ë¦¬ - íšŒìƒ‰ */
            cursor: pointer;
            text-indent: 1rem; /* í…ìŠ¤íŠ¸ ë“¤ì—¬ì“°ê¸° */
            position: relative;
        }
        /* ì„ íƒëœ ì˜µì…˜ ìŠ¤íƒ€ì¼ */
        .options input[type="radio"]:checked + span {
            background-color: #bfdbfe; /* ì„ íƒëœ ì˜µì…˜ - ì—°í•œ íŒŒë‘ìƒ‰ */
            border-color: #3b82f6; /* ì„ íƒëœ ì˜µì…˜ - ì§„í•œ íŒŒë‘ìƒ‰ í…Œë‘ë¦¬ */
            box-shadow: 0 0 0 2px #3b82f6; /* ì„ íƒ ì‹œ í…Œë‘ë¦¬ ê·¸ë¦¼ì */
        }
        .options label:hover span {
            background-color: #e5e7eb; /* ì˜µì…˜ í˜¸ë²„ - ì—°í•œ íšŒìƒ‰ */
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 90%;
            min-width: 300px;
            position: relative;
        }
        .close-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ì„ ìœ„í•œ ì‘ì€ í™”ë©´ ì¡°ì • */
        @media (max-width: 640px) {
            .step {
                font-size: 0.7rem; /* ì‘ì€ í™”ë©´ì—ì„œ ê³„ë‹¨ ìˆ«ì í¬ê¸° ì¡°ì • */
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 sm:p-6 lg:p-8 flex justify-center items-center min-h-screen">
    <div class="container bg-white p-6 sm:p-8 lg:p-10 rounded-xl shadow-lg max-w-4xl w-full flex flex-col items-center">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-blue-800 mb-6">
            ğŸ§ í­ìˆ˜ì˜ ê³„ë‹¨ ì˜¤ë¥´ê¸°: ì‘ê¸‰ì²˜ì¹˜ í€´ì¦ˆ ğŸ§
        </h1>
        <hr class="border-t-2 border-blue-300 my-8 w-full">

        <div id="game-area" class="relative w-full h-64 sm:h-80 lg:h-96 flex justify-center items-end overflow-hidden mb-10">
            <div id="steps-area" class="absolute bottom-0 left-0 w-full h-full">
            </div>
            
            <div id="pengsoo" class="absolute text-5xl">ğŸ§</div>
        </div>

        <div id="quiz-area" class="w-full">
            <h2 id="quiz-stage" class="text-xl sm:text-2xl font-semibold text-center text-blue-700 mb-6">
                ê³„ë‹¨ - 1ë‹¨ê³„
            </h2>
            <div id="question-block" class="bg-blue-50 p-5 rounded-lg border-l-4 border-blue-500 mb-6 shadow-sm">
                <p id="question-number" class="font-semibold text-lg mb-3">ë¬¸ì œ X.</p>
                <p id="question-text" class="mb-4">ì§ˆë¬¸ ë‚´ìš©</p>
                <div id="options-area" class="options space-y-2">
                    </div>
                <div id="feedback" class="feedback-message hidden"></div>
            </div>

            <div class="flex justify-center mt-6 space-x-4">
                <button id="check-answer-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105 active:scale-95">
                    ì •ë‹µ í™•ì¸
                </button>
                <button id="next-question-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105 active:scale-95 hidden">
                    ë‹¤ìŒ
                </button>
            </div>
        </div>

        <div id="completion-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span id="modal-close-btn" class="close-button">&times;</span>
                <p class="text-2xl sm:text-3xl font-bold text-blue-800 mb-4">ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</p>
                <p class="text-lg text-gray-700 mb-6">
                    í­ìˆ˜ê°€ ëª¨ë“  ê³„ë‹¨ì„ ì˜¬ëìŠµë‹ˆë‹¤! ë§Œì„¸! ğŸ§ğŸ™Œ
                </p>
                <button id="restart-game-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105 active:scale-95">
                    ë‹¤ì‹œ ì‹œì‘
                </button>
            </div>
        </div>
    </div>

    <script>
        // í€´ì¦ˆ ë°ì´í„° ì •ì˜ (9ë²ˆ, 12ë²ˆ ë¬¸ì œ ì œê±° ë° 10ë‹¨ê³„ë¡œ ì¡°ì •)
        const quizData = [
            { id: 'q1', section: '1. ì‘ê¸‰ ì²˜ì¹˜ì˜ ê°œë…', question: "ë‹¤ìŒ ì¤‘ 'ì‘ê¸‰ ì²˜ì¹˜'ì˜ ì •ì˜ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?", options: ["A. ë³‘ì›ì—ì„œ ì˜ì‚¬ê°€ ì‹œí–‰í•˜ëŠ” ëª¨ë“  ì¹˜ë£Œ", "B. ìœ„ê¸‰í•œ ìƒí™©ì—ì„œ ì „ë¬¸ê°€ê°€ ì—†ì´ ì¦‰ì‹œ í–‰í•˜ëŠ” ì„ì‹œì ì¸ ì²˜ì¹˜", "C. í™˜ìê°€ ì™„ì „íˆ íšŒë³µí•  ë•Œê¹Œì§€ ì‹œí–‰í•˜ëŠ” ì¥ê¸° ì¹˜ë£Œ", "D. ì•½ì„ ì‚¬ìš©í•œ ëª¨ë“  ì¹˜ë£Œ í–‰ìœ„"], answer: "B" },
            { id: 'q2', section: '2. ì‘ê¸‰ ì²˜ì¹˜ì˜ ì¤‘ìš”ì„±', question: "ì‘ê¸‰ ì²˜ì¹˜ê°€ ì¤‘ìš”í•œ ì´ìœ  ë‘ ê°€ì§€ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?", options: ["A. ë³‘ì›ë¹„ ì ˆì•½, ì˜ì‚¬ ì—­í•  ëŒ€ì²´", "B. ìƒëª… êµ¬ì¶œ, ë¶€ìƒ ì•…í™” ë°©ì§€", "C. í†µì¦ ì¦‰ì‹œ ì œê±°, ì™„ë²½í•œ íšŒë³µ ë³´ì¥", "D. ì‹¬ë¦¬ì  ì•ˆì •, ë²”ì£„ ì˜ˆë°©"], answer: "B" },
            { id: 'q3', section: '2. ì‘ê¸‰ ì²˜ì¹˜ì˜ ì¤‘ìš”ì„±', question: "ì‘ê¸‰ ì²˜ì¹˜ë¥¼ ì œëŒ€ë¡œ í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° ë‚˜íƒ€ë‚  ìˆ˜ ìˆëŠ” ê²°ê³¼ë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€?", options: ["A. ìƒíƒœê°€ ì•…í™”ë  ìˆ˜ ìˆë‹¤", "B. ìƒëª…ì„ ìƒì„ ìˆ˜ ìˆë‹¤", "C. ë¹ ë¥¸ íšŒë³µì„ ë„ìš¸ ìˆ˜ ìˆë‹¤", "D. í›„ìœ ì¦ì´ ì‹¬í•´ì§ˆ ìˆ˜ ìˆë‹¤"], answer: "C" },
            { id: 'q4', section: '3. ìƒì²˜ê°€ ë‚¬ì„ ë•Œì˜ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•', question: "ì‘ì€ ìƒì²˜ê°€ ë‚¬ì„ ë•Œ ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  ì‘ê¸‰ ì²˜ì¹˜ëŠ”?", options: ["A. ì–¼ìŒì°œì§ˆ", "B. ì•Œì½”ì˜¬ ì†Œë…", "C. íë¥´ëŠ” ë¬¼ë¡œ ì„¸ì²™", "D. ë¶•ëŒ€ ê°ê¸°"], answer: "C" },
            { id: 'q5', section: '4. ì½”í”¼ê°€ ë‚  ë•Œì˜ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•', question: "ì½”í”¼ê°€ ë‚  ë•Œ ê°€ì¥ ì ì ˆí•œ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•ì€?", options: ["A. ê³ ê°œë¥¼ ë’¤ë¡œ ì –íˆê³  ëˆ•ëŠ”ë‹¤", "B. ê³ ê°œë¥¼ ì•ìœ¼ë¡œ ìˆ™ì´ê³  ì½”ë¥¼ 5~10ë¶„ê°„ ì••ë°•í•œë‹¤", "C. ì½”ë¥¼ ê³„ì† í’€ì–´ì¤€ë‹¤", "D. ë¬¼ì„ ë§ˆì‹ ë‹¤"], answer: "B" },
            { id: 'q6', section: '5. ì¹˜ì•„ê°€ ë‹¤ì³¤ì„ ë•Œì˜ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•', question: "ì•ë‹ˆê°€ ì™„ì „íˆ ë¹ ì¡Œì„ ê²½ìš° ì‘ê¸‰ ì²˜ì¹˜ë¡œ í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ì ì ˆí•œ ë°©ë²•ì€?", options: ["A. ë¹ ì§„ ì´ë¥¼ í™ì— ë¬»ëŠ”ë‹¤", "B. ë¹ ì§„ ì´ë¥¼ íœ´ì§€ì— ì‹¸ì„œ ë³´ê´€í•œë‹¤", "C. ë¹ ì§„ ì´ë¥¼ ìš°ìœ ì— ë‹´ê°€ ë³‘ì›ì— ê°€ì ¸ê°„ë‹¤", "D. ë¹ ì§„ ì´ë¥¼ íë¥´ëŠ” ë¬¼ì— ì”»ì–´ ë²„ë¦°ë‹¤"], answer: "C" },
            { id: 'q7', section: '6. í™”ìƒì„ ì…ì—ˆì„ ë•Œì˜ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•', question: "í™”ìƒì„ ì…ì—ˆì„ ë•Œ ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  í–‰ë™ì€?", options: ["A. ì–¼ìŒì„ ë¬¸ì§€ë¥¸ë‹¤", "B. í™”ìƒ ë¶€ìœ„ë¥¼ ë”°ëœ»í•œ ë¬¼ì— ë‹´ê·¼ë‹¤", "C. íë¥´ëŠ” ì°¬ë¬¼ì— 10~20ë¶„ê°„ ì‹íŒë‹¤", "D. ì—°ê³ ë¥¼ ë¨¼ì € ë°”ë¥¸ë‹¤"], answer: "C" },
            { id: 'q8', section: '6. í™”ìƒì„ ì…ì—ˆì„ ë•Œì˜ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•', question: "ì‹¬í•œ í™”ìƒ(ë¬¼ì§‘ì´ ìƒê¸°ê±°ë‚˜ ì¡°ì§ì´ ì†ìƒëœ ê²½ìš°)ì˜ ê²½ìš°, ì§ì ‘ ì†ì„ ëŒ€ê±°ë‚˜ í„°ëœ¨ë¦¬ë©´ ì•ˆ ë˜ëŠ” ê°€ì¥ ì£¼ëœ ì´ìœ ëŠ”?", options: ["A. í†µì¦ì´ ì‹¬í•´ì§€ê¸° ë•Œë¬¸ì´ë‹¤", "B. ê°ì—¼ ìœ„í—˜ì´ í¬ê¸° ë•Œë¬¸ì´ë‹¤", "C. ìƒì²˜ê°€ ë¹¨ë¦¬ ì•„ë¬¼ê¸° ë•Œë¬¸ì´ë‹¤", "D. í‰í„°ê°€ í¬ê²Œ ë‚¨ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤"], answer: "B" },
            { id: 'q10', section: '8. ë²Œì— ì˜ì˜€ì„ ë•Œì˜ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•', question: "ë²Œì— ì˜ì˜€ì„ ë•Œ ì‘ê¸‰ ì²˜ì¹˜ ë°©ë²•ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?", options: ["A. ì¹¨ì´ ë°•í˜€ ìˆìœ¼ë©´ ì†ìœ¼ë¡œ ëˆŒëŸ¬ì„œ ëº€ë‹¤", "B. ì¹¨ì„ ì¹´ë“œë¡œ ì œê±°í•œ í›„, ëƒ‰ì°œì§ˆí•œë‹¤", "C. ë²Œ ìœ ë¶€ìœ„ë¥¼ ë¬¸ì§€ë¥¸ë‹¤", "D. ëœ¨ê±°ìš´ ë¬¼ë¡œ ì”»ëŠ”ë‹¤"], answer: "B" },
            { id: 'q11', section: '8. ë²Œì— ì˜ì¸ í›„ ìˆ¨ì‰¬ê¸° ê³¤ë€í•˜ê±°ë‚˜ ì–¼êµ´ì´ ë¶“ëŠ” ì¦ìƒì´ ë‚˜íƒ€ë‚  ë•Œ, ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?', question: "ë²Œì— ì˜ì—¬ ìˆ¨ì‰¬ê¸° ê³¤ë€í•˜ê±°ë‚˜ ì–¼êµ´ì´ ë¶“ëŠ” ì¦ìƒì´ ë‚˜íƒ€ë‚˜ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?", options: ["A. ì°¬ë¬¼ë¡œ ì˜ì¸ ë¶€ìœ„ë¥¼ ê³„ì† ë¬¸ì§€ë¥¸ë‹¤", "B. ì†Œê¸ˆì„ ë°”ë¥¸ë‹¤", "C. ì¦‰ì‹œ ë³‘ì›ì— ê°€ê±°ë‚˜ 119ì— ì‹ ê³ í•œë‹¤", "D. ìê°€ ì¹˜ë£Œë¥¼ ì‹œë„í•œë‹¤"], answer: "C" }
        ];

        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let currentQuestionIndex = 0; // í˜„ì¬ í’€ì–´ì•¼ í•  ë¬¸ì œì˜ ì¸ë±ìŠ¤ (0ë¶€í„° ì‹œì‘)
        let stepsElements = []; // ê° ê³„ë‹¨ DOM ìš”ì†Œë¥¼ ì €ì¥
        const NUM_STEPS = 10; // ì´ ê³„ë‹¨ ìˆ˜ (í€´ì¦ˆ ë¬¸ì œ ìˆ˜ì™€ ë™ì¼)

        // DOM ìš”ì†Œ ì°¸ì¡°
        const pengsoo = document.getElementById('pengsoo');
        const quizStage = document.getElementById('quiz-stage');
        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const optionsArea = document.getElementById('options-area');
        const feedbackEl = document.getElementById('feedback');
        const checkAnswerBtn = document.getElementById('check-answer-btn');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const completionModal = document.getElementById('completion-modal');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const restartGameBtn = document.getElementById('restart-game-btn');
        const gameArea = document.getElementById('game-area');

        /**
         * ê²Œì„ì„ ì´ˆê¸°í™”í•˜ê³  ì²« ë²ˆì§¸ ì§ˆë¬¸ì„ í‘œì‹œí•©ë‹ˆë‹¤.
         */
        function initGame() {
            currentQuestionIndex = 0;
            completionModal.classList.add('hidden'); // ëª¨ë‹¬ ìˆ¨ê¹€
            pengsoo.textContent = 'ğŸ§'; // í­ìˆ˜ ì•„ì´ì½˜ ì´ˆê¸°í™”

            // ê³„ë‹¨ ìƒì„±
            createStairs(NUM_STEPS);
            
            // í­ìˆ˜ ì´ˆê¸° ìœ„ì¹˜ ì„¤ì • (ê³„ë‹¨ ì•„ë˜ ì™¼ìª½ ë°”ë‹¥)
            // requestAnimationFrameì„ ì‚¬ìš©í•˜ì—¬ í­ìˆ˜ì˜ ì •í™•í•œ offsetWidthë¥¼ ì–»ì„ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
            requestAnimationFrame(() => {
                updatePengsooPosition(0); // 0ì€ ì‹œì‘ ì§€ì (ë•…)ì„ ì˜ë¯¸
            });

            displayQuestion(); // ì²« ë²ˆì§¸ ë¬¸ì œ í‘œì‹œ
        }

        /**
         * ê³„ë‹¨ ìš”ì†Œë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê³  ë°°ì¹˜í•©ë‹ˆë‹¤.
         * ê³„ë‹¨ì´ ì™¼ìª½ ì•„ë˜ì—ì„œ ì‹œì‘í•˜ì—¬ ì˜¤ë¥¸ìª½ ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” í˜•íƒœë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
         * @param {number} numSteps - ìƒì„±í•  ê³„ë‹¨ì˜ ì´ ê°œìˆ˜
         */
        function createStairs(numSteps) {
            const stepsArea = document.getElementById('steps-area');
            stepsArea.innerHTML = ''; // ì´ì „ ê³„ë‹¨ ì´ˆê¸°í™”
            stepsElements = []; // ë°°ì—´ ì´ˆê¸°í™”

            const gameAreaRect = gameArea.getBoundingClientRect();
            const gameAreaWidth = gameAreaRect.width;
            const gameAreaHeight = gameAreaRect.height;

            // ê³„ë‹¨ ë„ˆë¹„ë¥¼ 'ë‹¨ê³„' í…ìŠ¤íŠ¸ì— ë§ê²Œ ê³ ì •ëœ í”½ì…€ ê°’ìœ¼ë¡œ ì„¤ì •
            const fixedStepWidth = 80; // px, ì˜ˆ: "10ë‹¨ê³„" í…ìŠ¤íŠ¸ê°€ ì¶©ë¶„íˆ ë“¤ì–´ê°ˆ ë„ˆë¹„
            // ê³„ë‹¨ ë†’ì´ë¥¼ ì¤„ì—¬ì„œ 10ë‹¨ê³„ ëª¨ë‘ ë³´ì´ë„ë¡ ì¡°ì •
            const fixedStepHeight = 30; // px, 45pxì—ì„œ 30pxë¡œ ì¡°ì •
            const horizontalSpacing = 80; // ê° ê³„ë‹¨ì´ ì˜†ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê±°ë¦¬
            // ê³„ë‹¨ ìˆ˜ì§ ê°„ê²©ì„ ê³„ë‹¨ ë†’ì´ì™€ ë™ì¼í•˜ê²Œ ì¡°ì •
            const verticalSpacing = fixedStepHeight; // ê° ê³„ë‹¨ì´ ìœ„ë¡œ ì´ë™í•˜ëŠ” ê±°ë¦¬ (ê³„ë‹¨ ë†’ì´ì™€ ë™ì¼)

            const startLeftOffset = gameAreaWidth * 0.05; // ì²« ê³„ë‹¨ì˜ ì™¼ìª½ ì‹œì‘ ìœ„ì¹˜ (ê²Œì„ ì˜ì—­ì˜ 5% ì§€ì )
            const startBottomOffset = 0; // ë°”ë‹¥ ê¸°ì¤€ ë†’ì´

            for (let i = 0; i < numSteps; i++) {
                const stepDiv = document.createElement('div');
                stepDiv.id = `step-${i + 1}`;
                stepDiv.className = `step`;
                
                // ê° ê³„ë‹¨ì˜ ìœ„ì¹˜ë¥¼ ê³„ì‚° (ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•˜ë©° ìœ„ë¡œ ì˜¬ë¼ê°)
                const currentLeft = startLeftOffset + (i * horizontalSpacing); 
                const currentBottom = startBottomOffset + (i * verticalSpacing); 

                stepDiv.style.width = `${fixedStepWidth}px`;
                stepDiv.style.height = `${fixedStepHeight}px`;
                stepDiv.style.left = `${currentLeft}px`;
                stepDiv.style.bottom = `${currentBottom}px`;
                stepDiv.style.zIndex = i + 1; // ì•„ë˜ ê³„ë‹¨ì´ ìœ„ì— ì˜¤ë„ë¡ (z-index ë‚®ê²Œ)
                stepDiv.innerHTML = `<span>${i + 1}ë‹¨ê³„</span>`; // ê³„ë‹¨ ë‹¨ê³„ í‘œì‹œ
                stepsArea.appendChild(stepDiv);
                stepsElements.push(stepDiv);
            }
        }

        /**
         * í˜„ì¬ ì§ˆë¬¸ì„ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
         */
        function displayQuestion() {
            if (currentQuestionIndex >= quizData.length) {
                // ëª¨ë“  ì§ˆë¬¸ ì™„ë£Œ
                showCompletion();
                return;
            }

            const currentQuestion = quizData[currentQuestionIndex];
            
            // ë¬¸ì œ ë²ˆí˜¸ì™€ ë¬¸ì œ ë‚´ìš©ì„ í•œ ì¤„ë¡œ í‘œì‹œ
            questionNumberEl.textContent = `ë¬¸ì œ ${currentQuestionIndex + 1}. ${currentQuestion.question}`;
            questionTextEl.textContent = ''; // ì´ì „ì— ë¬¸ì œ í…ìŠ¤íŠ¸ë¥¼ ë”°ë¡œ í‘œì‹œí•˜ë˜ ìš”ì†Œë¥¼ ë¹„ì›ë‹ˆë‹¤.

            quizStage.textContent = `ê³„ë‹¨ - ${currentQuestionIndex + 1}ë‹¨ê³„`;
            
            optionsArea.innerHTML = ''; // ì´ì „ ì˜µì…˜ ì´ˆê¸°í™”
            feedbackEl.classList.add('hidden'); // í”¼ë“œë°± ë©”ì‹œì§€ ìˆ¨ê¹€
            feedbackEl.classList.remove('correct', 'incorrect'); // í”¼ë“œë°± ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            nextQuestionBtn.classList.add('hidden'); // 'ë‹¤ìŒ' ë²„íŠ¼ ìˆ¨ê¹€
            checkAnswerBtn.classList.remove('hidden'); // 'ì •ë‹µ í™•ì¸' ë²„íŠ¼ í‘œì‹œ

            // ê°ê´€ì‹ ì§ˆë¬¸ ì˜µì…˜ ë Œë”ë§
            currentQuestion.options.forEach((option, index) => {
                const label = document.createElement('label');
                label.className = 'block cursor-pointer p-2 rounded-md hover:bg-blue-100 transition-colors duration-200';
                label.innerHTML = `
                    <input type="radio" name="current_question" value="${String.fromCharCode(65 + index)}">
                    <span>${option}</span>
                `;
                optionsArea.appendChild(label);
            });
            checkAnswerBtn.textContent = 'ì •ë‹µ í™•ì¸';
            checkAnswerBtn.onclick = checkAnswer;
        }

        /**
         * ê°ê´€ì‹ ì§ˆë¬¸ì˜ ì •ë‹µì„ í™•ì¸í•˜ê³  í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.
         */
        function checkAnswer() {
            const currentQuestion = quizData[currentQuestionIndex];
            const selectedOption = document.querySelector('input[name="current_question"]:checked');
            
            feedbackEl.classList.remove('hidden');
            if (selectedOption && selectedOption.value === currentQuestion.answer) {
                feedbackEl.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                feedbackEl.classList.add('correct');
                feedbackEl.classList.remove('incorrect');
                checkAnswerBtn.classList.add('hidden'); // ì •ë‹µ ë§ì·„ìœ¼ë‹ˆ í™•ì¸ ë²„íŠ¼ ìˆ¨ê¹€
                nextQuestionBtn.classList.remove('hidden'); // ë‹¤ìŒ ë²„íŠ¼ í‘œì‹œ
            } else {
                feedbackEl.textContent = 'í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”. ğŸ˜”';
                feedbackEl.classList.add('incorrect');
                feedbackEl.classList.remove('correct');
                // í‹€ë ¸ì„ ê²½ìš° ë‹¤ì‹œ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ë²„íŠ¼ ìœ ì§€
            }
        }

        /**
         * í­ìˆ˜ ìœ„ì¹˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
         * ëª¨ë“  ì§ˆë¬¸ì´ ì™„ë£Œë˜ë©´ ê²Œì„ ì™„ë£Œ í™”ë©´ì„ í‘œì‹œí•©ë‹ˆë‹¤.
         */
        function advanceGame() {
            // í­ìˆ˜ë¥¼ ë‹¤ìŒ ê³„ë‹¨ìœ¼ë¡œ ì´ë™ (currentQuestionIndexëŠ” í˜„ì¬ í’€ì—ˆë˜ ë¬¸ì œì˜ ì¸ë±ìŠ¤ì´ë¯€ë¡œ, ë‹¤ìŒ ë‹¨ê³„ëŠ” currentQuestionIndex + 1)
            updatePengsooPosition(currentQuestionIndex + 1); // 1ë‹¨ê³„ë¡œ ì´ë™í•˜ë ¤ë©´ ì¸ë±ìŠ¤ 0ì´ë¯€ë¡œ +1 í•´ì¤Œ

            feedbackEl.classList.add('hidden'); // í”¼ë“œë°± ë©”ì‹œì§€ ìˆ¨ê¹€
            checkAnswerBtn.classList.add('hidden'); // í™•ì¸ ë²„íŠ¼ ìˆ¨ê¹€
            nextQuestionBtn.classList.add('hidden'); // ë‹¤ìŒ ë²„íŠ¼ ìˆ¨ê¹€ (ì´ë¯¸ í´ë¦­í–ˆìœ¼ë¯€ë¡œ)

            // í­ìˆ˜ ì´ë™ ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ ë‹¤ìŒ ì§ˆë¬¸ ë¡œë“œ
            setTimeout(() => {
                currentQuestionIndex++; // ë‹¤ìŒ ë¬¸ì œë¡œ ì¸ë±ìŠ¤ ì¦ê°€
                displayQuestion();
            }, 700); // í­ìˆ˜ transition ì‹œê°„ê³¼ ë§ì¶¤
        }

        /**
         * í­ìˆ˜ì˜ ì‹œê°ì ì¸ ìœ„ì¹˜ë¥¼ ì£¼ì–´ì§„ ë‹¨ê³„ì— ë§ì¶° ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         * @param {number} targetStepNumber - í­ìˆ˜ê°€ ì´ë™í•  ëª©í‘œ ê³„ë‹¨ ë²ˆí˜¸ (0: ì‹œì‘ ì§€ì , 1~NUM_STEPS: ê³„ë‹¨)
         */
        function updatePengsooPosition(targetStepNumber) {
            let pengsooTargetBottom;
            let pengsooTargetLeft;
            
            if (targetStepNumber === 0) { // í­ìˆ˜ê°€ ì‹œì‘ ì§€ì  (ì²« ë²ˆì§¸ ê³„ë‹¨ ì™¼ìª½ ë°”ë‹¥)
                const gameAreaRect = gameArea.getBoundingClientRect();
                pengsooTargetLeft = gameAreaRect.width * 0.05; // ê²Œì„ ì˜ì—­ì˜ ì™¼ìª½ì—ì„œ 5% ì§€ì 
                pengsooTargetBottom = 0; // ê²Œì„ ì˜ì—­ ë°”ë‹¥ì— ìœ„ì¹˜
                pengsoo.textContent = 'ğŸ§'; // ë§Œì„¸ í¬ì¦ˆ ì´ˆê¸°í™”
            } else if (targetStepNumber <= NUM_STEPS) { // í­ìˆ˜ê°€ ê³„ë‹¨ ìœ„ì— ìˆìŒ
                const targetElement = stepsElements[targetStepNumber - 1]; // ë°°ì—´ ì¸ë±ìŠ¤ëŠ” 0ë¶€í„° ì‹œì‘
                // í­ìˆ˜ì˜ ì™¼ìª½ ìœ„ì¹˜ë¥¼ ê³„ë‹¨ì˜ ì¤‘ì•™ìœ¼ë¡œ ì„¤ì • (CSS transformìœ¼ë¡œ í­ìˆ˜ ìì²´ë¥¼ ì¤‘ì•™ ì •ë ¬)
                pengsooTargetLeft = parseInt(targetElement.style.left) + (parseInt(targetElement.style.width) / 2);
                pengsooTargetBottom = parseInt(targetElement.style.bottom) + parseInt(targetElement.style.height); // ê³„ë‹¨ ìœ„ì— ìœ„ì¹˜
                pengsoo.textContent = 'ğŸ§'; // ë§Œì„¸ í¬ì¦ˆ ì´ˆê¸°í™”
            }
            
            // í­ìˆ˜ì˜ ìœ„ì¹˜ë¥¼ ì—…ë°ì´íŠ¸
            pengsoo.style.left = `${pengsooTargetLeft}px`;
            pengsoo.style.bottom = `${pengsooTargetBottom}px`;
        }

        /**
         * ê²Œì„ ì™„ë£Œ ëª¨ë‹¬ì„ í‘œì‹œí•©ë‹ˆë‹¤. í­ìˆ˜ê°€ ë§Œì„¸ í¬ì¦ˆë¥¼ ì·¨í•©ë‹ˆë‹¤.
         */
        function showCompletion() {
            // ë§ˆì§€ë§‰ ê³„ë‹¨ì— í­ìˆ˜ë¥¼ ìœ„ì¹˜ì‹œí‚¤ê³  ë§Œì„¸ ì•„ì´ì½˜ìœ¼ë¡œ ë³€ê²½
            const lastStep = stepsElements[NUM_STEPS - 1];
            
            // í­ìˆ˜ì˜ ì™¼ìª½ ìœ„ì¹˜ë¥¼ ë§ˆì§€ë§‰ ê³„ë‹¨ì˜ ì¤‘ì•™ìœ¼ë¡œ ì„¤ì •
            const pengsooTargetLeft = parseInt(lastStep.style.left) + (parseInt(lastStep.style.width) / 2);
            const pengsooTargetBottom = parseInt(lastStep.style.bottom) + parseInt(lastStep.style.height);
            
            pengsoo.style.left = `${pengsooTargetLeft}px`;
            pengsoo.style.bottom = `${pengsooTargetBottom}px`;
            pengsoo.textContent = 'ğŸ™Œ'; // í­ìˆ˜ê°€ ë§Œì„¸í•˜ëŠ” ì´ëª¨ì§€ë¡œ ë³€ê²½

            completionModal.classList.remove('hidden');
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        window.onload = initGame; // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²Œì„ ì´ˆê¸°í™”

        nextQuestionBtn.addEventListener('click', advanceGame); // 'ë‹¤ìŒ' ë²„íŠ¼ í´ë¦­ ì‹œ ì§„í–‰
        restartGameBtn.addEventListener('click', initGame); // 'ë‹¤ì‹œ ì‹œì‘' ë²„íŠ¼ í´ë¦­ ì‹œ ì´ˆê¸°í™”
        modalCloseBtn.addEventListener('click', () => { // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼
            completionModal.classList.add('hidden');
        });

        // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ê³„ë‹¨ ë° í­ìˆ˜ ìœ„ì¹˜ ì¬ì¡°ì • (ë°˜ì‘í˜• ëŒ€ì‘)
        window.onresize = () => {
            createStairs(NUM_STEPS); // ê³„ë‹¨ ì¬ë°°ì¹˜
            // í˜„ì¬ í­ìˆ˜ì˜ ë…¼ë¦¬ì  ìœ„ì¹˜ì— ë”°ë¼ ì¬ì¡°ì •
            // `currentQuestionIndex`ê°€ 0ì¼ ë•ŒëŠ” ì´ˆê¸° ìœ„ì¹˜, ì•„ë‹ˆë©´ í•´ë‹¹ ê³„ë‹¨ì— ìœ„ì¹˜
            updatePengsooPosition(currentQuestionIndex === 0 ? 0 : currentQuestionIndex); 
        };
    </script>
</body>
</html>
